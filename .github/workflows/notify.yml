name: Deployment Notifications

on:
  push:
    branches: [ main ]
  deployment_status:

jobs:
  notify:
    runs-on: ubuntu-latest
    
    steps:
    - name: Checkout code
      uses: actions/checkout@v4
    
    - name: Get commit info
      id: commit
      run: |
        echo "message=$(git log -1 --pretty=%B)" >> $GITHUB_OUTPUT
        echo "author=$(git log -1 --pretty=%an)" >> $GITHUB_OUTPUT
        echo "sha=$(git log -1 --pretty=%h)" >> $GITHUB_OUTPUT
    
    - name: Create deployment summary
      run: |
        echo "## ðŸš€ Deployment Summary" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "**Repository**: health-akhada-app" >> $GITHUB_STEP_SUMMARY
        echo "**Branch**: main" >> $GITHUB_STEP_SUMMARY
        echo "**Commit**: ${{ steps.commit.outputs.sha }}" >> $GITHUB_STEP_SUMMARY
        echo "**Author**: ${{ steps.commit.outputs.author }}" >> $GITHUB_STEP_SUMMARY
        echo "**Message**: ${{ steps.commit.outputs.message }}" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "### ðŸ“¦ Deployed Files" >> $GITHUB_STEP_SUMMARY
        echo "- âœ… index.html (Dashboard)" >> $GITHUB_STEP_SUMMARY
        echo "- âœ… workout.html (AI Form Coach)" >> $GITHUB_STEP_SUMMARY
        echo "- âœ… nutrition.html (Nutrition Hub)" >> $GITHUB_STEP_SUMMARY
        echo "- âœ… progress.html (Progress Analytics)" >> $GITHUB_STEP_SUMMARY
        echo "- âœ… about.html (Community)" >> $GITHUB_STEP_SUMMARY
        echo "- âœ… JavaScript modules" >> $GITHUB_STEP_SUMMARY
        echo "" >> $GITHUB_STEP_SUMMARY
        echo "**Status**: âœ… Deployment Successful!" >> $GITHUB_STEP_SUMMARY
